<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ó‡∏î‡∏™‡∏≠‡∏ö Admin Panel - Wawa Baansoan Minimar</title>
    <link rel="stylesheet" href="admin-style.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
    <style>
        .test-container {
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
        }
        .test-button {
            background: #2c5aa0;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            background: #1a365d;
            transform: translateY(-2px);
        }
        .test-button.danger {
            background: #dc3545;
        }
        .test-button.danger:hover {
            background: #c82333;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .credentials {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #007bff;
            margin: 15px 0;
        }
        .hidden { display: none !important; }
        
        /* Modern enhancements */
        .help-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,123,255,0.3);
            z-index: 1000;
            transition: all 0.3s ease;
        }
        .help-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,123,255,0.4);
        }
        
        /* Enhanced accessibility */
        .test-button:focus {
            outline: 2px solid #007bff;
            outline-offset: 2px;
        }
        
        @media (prefers-reduced-motion: reduce) {
            .test-button, .help-button {
                transition: none;
            }
        }
    </style>
</head>
<body>
    <main id="main-content" role="main">
        <div class="test-container">
            <header>
                <h1><i class="fas fa-tools"></i> ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Admin Panel - Wawa Baansoan Minimar</h1>
                <button class="help-button" onclick="openHelpModal()" aria-label="‡πÄ‡∏õ‡∏¥‡∏î‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠" title="‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (F1)">
                    <i class="fas fa-question"></i>
                </button>
            </header>
        
        <div class="test-section">
            <h2><i class="fas fa-info-circle"></i> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
            <div class="credentials">
                <h4><i class="fas fa-key"></i> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö:</h4>
                <p><strong>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ:</strong> admin</p>
                <p><strong>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô:</strong> wawa2025</p>
                <p><strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏à‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏≤‡∏Å‡∏ï‡∏¥‡πä‡∏Å‡∏ä‡πà‡∏≠‡∏á "‡∏à‡∏î‡∏à‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö"</p>
            </div>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-sign-in-alt"></i> ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
            <p>‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≤‡∏£ Login ‡πÅ‡∏•‡∏∞ Logout</p>
            <button class="test-button" onclick="testDirectLogin()">Login ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡∏Ç‡πâ‡∏≤‡∏° Form)</button>
            <button class="test-button" onclick="testLogout()">Logout</button>
            <button class="test-button" onclick="checkLoginStatus()">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Login</button>
            <div id="loginTest" class="test-result info">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö</div>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-database"></i> ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Admin</h2>
            <p>‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
            <button class="test-button" onclick="testDataLoad()">‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
            <button class="test-button" onclick="testDataSave()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            <button class="test-button danger" onclick="clearAdminData()">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Admin</button>
            <div id="dataTest" class="test-result info">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö</div>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-cogs"></i> ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Admin</h2>
            <p>‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á Admin Panel</p>
            <button class="test-button" onclick="testAdminFunctions()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô</button>
            <button class="test-button" onclick="testErrorHandling()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö Error Handling</button>
            <div id="functionTest" class="test-result info">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö</div>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-external-link-alt"></i> ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ Admin</h2>
            <p>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á Admin Panel</p>
            <button class="test-button" onclick="openAdminLogin()">‡πÄ‡∏õ‡∏¥‡∏î Admin Login</button>
            <button class="test-button" onclick="openAdminDashboard()">‡πÄ‡∏õ‡∏¥‡∏î Admin Dashboard</button>
            <button class="test-button" onclick="openMainSite()">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-bug"></i> ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤</h2>
            <p>‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Debug ‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤</p>
            <button class="test-button" onclick="showDebugInfo()">‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Debug</button>
            <button class="test-button" onclick="testConsoleLog()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö Console Log</button>
            <button class="test-button danger" onclick="simulateError()">‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î</button>
            <div id="debugTest" class="test-result info">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö</div>
        </div>

        <div class="test-section">
            <h2><i class="fas fa-chart-bar"></i> ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏∞‡∏ö‡∏ö</h2>
            <div id="systemStats" class="test-result info">
                <p><i class="fas fa-clock"></i> ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="currentTime">-</span></p>
                <p><i class="fas fa-database"></i> LocalStorage: <span id="storageStatus">-</span></p>
                <p><i class="fas fa-user"></i> ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: <span id="userStatus">-</span></p>
                <p><i class="fas fa-memory"></i> Memory Usage: <span id="memoryUsage">-</span></p>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö...</p>
        </div>
    </div>

    <!-- Emergency Fix: Pre-define mock data to prevent defaultRooms is not defined error -->
    <script>
        // Emergency mock data definitions - must come before admin-script.js
        if (typeof window.defaultRooms === 'undefined') {
            window.defaultRooms = [
                { id: 'R001', name: '‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏î‡∏á (Red Room)', price: 800, status: 'available' },
                { id: 'R002', name: '‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß (Green Room)', price: 850, status: 'available' },
                { id: 'R003', name: '‡∏´‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤ (Blue Room)', price: 900, status: 'occupied' },
                { id: 'R004', name: '‡∏´‡πâ‡∏≠‡∏á‡∏™‡πâ‡∏° (Orange Room)', price: 950, status: 'available' },
                { id: 'R005', name: '‡∏´‡πâ‡∏≠‡∏á‡∏°‡πà‡∏ß‡∏á (Purple Room)', price: 1000, status: 'maintenance' }
            ];
        }

        if (typeof window.defaultBookings === 'undefined') {
            window.defaultBookings = [
                { id: 'B001', room: 'R003', guest: '‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ', checkIn: '2025-01-10', checkOut: '2025-01-12', status: 'confirmed' },
                { id: 'B002', room: 'R001', guest: '‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á ‡∏£‡∏±‡∏Å‡∏™‡∏∞‡∏≠‡∏≤‡∏î', checkIn: '2025-01-15', checkOut: '2025-01-17', status: 'pending' }
            ];
        }

        if (typeof window.defaultIssues === 'undefined') {
            window.defaultIssues = [
                { id: 'I001', room: 'R005', issue: '‡πÅ‡∏≠‡∏£‡πå‡πÄ‡∏™‡∏µ‡∏¢', status: 'pending', priority: 'high' },
                { id: 'I002', room: 'R002', issue: '‡∏´‡∏•‡∏≠‡∏î‡πÑ‡∏ü‡∏Ç‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏á', status: 'resolved', priority: 'medium' }
            ];
        }

        if (typeof window.defaultContacts === 'undefined') {
            window.defaultContacts = [
                { id: 'C001', name: '‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡∏ô‡∏µ', email: 'manee@email.com', message: '‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å', status: 'new' },
                { id: 'C002', name: '‡∏Ñ‡∏∏‡∏ì‡πÇ‡∏™‡∏°‡∏™', email: 'somsri@email.com', message: '‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å', status: 'replied' }
            ];
        }

        // Also define as global variables (without window prefix) for backward compatibility
        if (typeof defaultRooms === 'undefined') { var defaultRooms = window.defaultRooms; }
        if (typeof defaultBookings === 'undefined') { var defaultBookings = window.defaultBookings; }
        if (typeof defaultIssues === 'undefined') { var defaultIssues = window.defaultIssues; }
        if (typeof defaultContacts === 'undefined') { var defaultContacts = window.defaultContacts; }

        console.log('üö® Emergency Fix: Mock data pre-defined for test-admin.html');
        console.log('üìä defaultRooms:', defaultRooms?.length || 0, 'items');
        console.log('üìÖ defaultBookings:', defaultBookings?.length || 0, 'items');
        console.log('üîß defaultIssues:', defaultIssues?.length || 0, 'items');
        console.log('üìß defaultContacts:', defaultContacts?.length || 0, 'items');
    </script>

    <script src="admin-script.js"></script>
    <script>
        // Test functions
        function testDirectLogin() {
            document.getElementById('loginTest').innerHTML = '<span class="info">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£ Login...</span>';
            
            // Simulate successful login
            const testUser = { username: 'admin', loginTime: new Date() };
            localStorage.setItem('adminUser', JSON.stringify(testUser));
            
            setTimeout(() => {
                document.getElementById('loginTest').innerHTML = '<span class="success">‚úÖ Login ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô LocalStorage</span>';
                updateSystemStats();
            }, 1000);
        }

        function testLogout() {
            document.getElementById('loginTest').innerHTML = '<span class="info">‡∏Å‡∏≥‡∏•‡∏±‡∏á Logout...</span>';
            
            localStorage.removeItem('adminUser');
            currentUser = null;
            
            setTimeout(() => {
                document.getElementById('loginTest').innerHTML = '<span class="warning">‚ö†Ô∏è Logout ‡πÅ‡∏•‡πâ‡∏ß - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Login ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö</span>';
                updateSystemStats();
            }, 500);
        }

        function checkLoginStatus() {
            const savedUser = localStorage.getItem('adminUser');
            const status = savedUser ? JSON.parse(savedUser) : null;
            
            if (status) {
                document.getElementById('loginTest').innerHTML = 
                    '<span class="success">‚úÖ Login ‡∏≠‡∏¢‡∏π‡πà: ' + status.username + 
                    '<br>‡πÄ‡∏ß‡∏•‡∏≤ Login: ' + new Date(status.loginTime).toLocaleString('th-TH') + '</span>';
            } else {
                document.getElementById('loginTest').innerHTML = '<span class="error">‚ùå ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ Login</span>';
            }
        }

        function testDataLoad() {
            document.getElementById('dataTest').innerHTML = '<span class="info">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</span>';
            
            try {
                // Test if admin script functions are available
                const hasDefaultRooms = typeof defaultRooms !== 'undefined';
                const hasDefaultBookings = typeof defaultBookings !== 'undefined';
                
                let result = '';
                if (hasDefaultRooms) {
                    result += '‚úÖ defaultRooms: ' + defaultRooms.length + ' ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£<br>';
                } else {
                    result += '‚ùå defaultRooms: ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•<br>';
                }
                
                if (hasDefaultBookings) {
                    result += '‚úÖ defaultBookings: ' + defaultBookings.length + ' ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£<br>';
                } else {
                    result += '‚ùå defaultBookings: ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•<br>';
                }
                
                document.getElementById('dataTest').innerHTML = '<span class="success">' + result + '</span>';
            } catch (error) {
                document.getElementById('dataTest').innerHTML = '<span class="error">‚ùå Error: ' + error.message + '</span>';
            }
        }

        function testDataSave() {
            try {
                const testData = {
                    rooms: ['A101', 'A102', 'B101'],
                    bookings: ['BK001', 'BK002'],
                    timestamp: new Date().toISOString()
                };
                
                localStorage.setItem('wawa_test_data', JSON.stringify(testData));
                document.getElementById('dataTest').innerHTML = '<span class="success">‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span>';
            } catch (error) {
                document.getElementById('dataTest').innerHTML = '<span class="error">‚ùå ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ: ' + error.message + '</span>';
            }
        }

        function clearAdminData() {
            if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Admin ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')) {
                try {
                    // Clear admin-related localStorage
                    const keys = ['adminUser', 'wawa_rooms', 'wawa_bookings', 'wawa_issues', 'wawa_contacts', 'wawa_settings', 'wawa_test_data'];
                    keys.forEach(key => localStorage.removeItem(key));
                    
                    document.getElementById('dataTest').innerHTML = '<span class="warning">‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Admin ‡∏ñ‡∏π‡∏Å‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß</span>';
                    updateSystemStats();
                } catch (error) {
                    document.getElementById('dataTest').innerHTML = '<span class="error">‚ùå ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ: ' + error.message + '</span>';
                }
            }
        }

        function testAdminFunctions() {
            document.getElementById('functionTest').innerHTML = '<span class="info">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô...</span>';
            
            let results = [];
            
            // Test handleLogin function
            if (typeof handleLogin === 'function') {
                results.push('‚úÖ handleLogin function exists');
            } else {
                results.push('‚ùå handleLogin function missing');
            }
            
            // Test initDashboard function
            if (typeof initDashboard === 'function') {
                results.push('‚úÖ initDashboard function exists');
            } else {
                results.push('‚ùå initDashboard function missing');
            }
            
            // Test showSection function
            if (typeof showSection === 'function') {
                results.push('‚úÖ showSection function exists');
            } else {
                results.push('‚ùå showSection function missing');
            }
            
            document.getElementById('functionTest').innerHTML = '<span class="success">' + results.join('<br>') + '</span>';
        }

        function testErrorHandling() {
            document.getElementById('functionTest').innerHTML = '<span class="info">‡∏ó‡∏î‡∏™‡∏≠‡∏ö Error Handling...</span>';
            
            try {
                // Try to call initDashboard to see if it handles errors properly
                if (typeof initDashboard === 'function') {
                    // This might fail if we're not on dashboard page, but should be handled gracefully
                    console.log('Testing initDashboard...');
                    document.getElementById('functionTest').innerHTML = '<span class="success">‚úÖ Error Handling ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ - ‡∏î‡∏π Console ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö logs</span>';
                } else {
                    document.getElementById('functionTest').innerHTML = '<span class="error">‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</span>';
                }
            } catch (error) {
                document.getElementById('functionTest').innerHTML = '<span class="success">‚úÖ Error ‡∏ñ‡∏π‡∏Å Catch: ' + error.message + '</span>';
            }
        }

        function openAdminLogin() {
            window.open('admin-login.html', '_blank');
        }

        function openAdminDashboard() {
            window.open('admin-dashboard.html', '_blank');
        }

        function openMainSite() {
            window.open('index.html', '_blank');
        }

        function showDebugInfo() {
            const info = {
                'Page URL': window.location.href,
                'User Agent': navigator.userAgent,
                'Screen Size': screen.width + 'x' + screen.height,
                'Window Size': window.innerWidth + 'x' + window.innerHeight,
                'LocalStorage Available': typeof(Storage) !== 'undefined',
                'Console Available': typeof console !== 'undefined',
                'Admin Script Loaded': typeof handleLogin !== 'undefined'
            };
            
            let debugHTML = '<strong>üîç Debug Information:</strong><br>';
            for (let [key, value] of Object.entries(info)) {
                debugHTML += `<strong>${key}:</strong> ${value}<br>`;
            }
            
            document.getElementById('debugTest').innerHTML = '<span class="info">' + debugHTML + '</span>';
        }

        function testConsoleLog() {
            console.log('üß™ Test Console Log from Admin Test Page');
            console.info('‚ÑπÔ∏è Info message');
            console.warn('‚ö†Ô∏è Warning message');
            console.error('‚ùå Error message (test)');
            
            document.getElementById('debugTest').innerHTML = '<span class="success">‚úÖ Console Log messages ‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß - ‡πÄ‡∏õ‡∏¥‡∏î Developer Tools (F12) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π</span>';
        }

        function simulateError() {
            if (confirm('‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö Error Handling?')) {
                try {
                    // This will throw an error
                    nonExistentFunction();
                } catch (error) {
                    console.error('üß™ Simulated Error:', error);
                    document.getElementById('debugTest').innerHTML = '<span class="error">‚ùå ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message + '</span>';
                }
            }
        }

        function updateSystemStats() {
            // Update current time
            document.getElementById('currentTime').textContent = new Date().toLocaleString('th-TH');
            
            // Check LocalStorage
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                document.getElementById('storageStatus').innerHTML = '<span style="color: green;">‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ</span>';
            } catch (e) {
                document.getElementById('storageStatus').innerHTML = '<span style="color: red;">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ</span>';
            }
            
            // Check user status
            const savedUser = localStorage.getItem('adminUser');
            if (savedUser) {
                const user = JSON.parse(savedUser);
                document.getElementById('userStatus').innerHTML = '<span style="color: green;">Login: ' + user.username + '</span>';
            } else {
                document.getElementById('userStatus').innerHTML = '<span style="color: red;">‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ Login</span>';
            }
            
            // Memory usage (if available)
            if (performance.memory) {
                const used = (performance.memory.usedJSHeapSize / 1048576).toFixed(2);
                document.getElementById('memoryUsage').textContent = used + ' MB';
            } else {
                document.getElementById('memoryUsage').textContent = '‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö';
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateSystemStats();
            setInterval(updateSystemStats, 5000); // Update every 5 seconds
            
            console.log('üß™ Admin Test Page Loaded');
        });
    </script>
    
    <!-- Include Usability Enhancements -->
    <script src="usability-enhancements.js"></script>
    
    <!-- Help Modal -->
    <div id="helpModal" class="modal" role="dialog" aria-labelledby="helpModalTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="helpModalTitle"><i class="fas fa-question-circle"></i> ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠ - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Admin Panel</h2>
                <button class="close-btn" onclick="closeHelpModal()" aria-label="‡∏õ‡∏¥‡∏î">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h3><i class="fas fa-play-circle"></i> ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h3>
                    <ul>
                        <li>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á Admin Panel</li>
                        <li>‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°</li>
                        <li>‡πÉ‡∏ä‡πâ‡∏õ‡∏∏‡πà‡∏° "‡∏•‡πâ‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà</li>
                    </ul>
                </div>
                <div class="help-section">
                    <h3><i class="fas fa-keyboard"></i> ‡∏Ñ‡∏µ‡∏¢‡πå‡∏•‡∏±‡∏î</h3>
                    <ul>
                        <li><kbd>F1</kbd> - ‡πÄ‡∏õ‡∏¥‡∏î‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</li>
                        <li><kbd>Escape</kbd> - ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á</li>
                        <li><kbd>Tab</kbd> - ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏µ‡∏¢‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Notification Container -->
    <div id="notificationContainer" class="notification-container" aria-live="polite"></div>
</body>
</html>
